// Dev build.gradle
plugins {
    id 'groovy'
}

group 'com.fox2code'
version project['foxloader.version']

configurations {
    include
    compileOnly.extendsFrom(include)
}

dependencies {
    compileOnly gradleApi()
    compileOnly localGroovy()
    // Cannot use quilt flower 1.9+ cause it require java 11
    api 'com.github.QuiltMC:quiltflower:1.8.1'
    api 'com.google.code.gson:gson:2.2.4'
    api 'org.ow2.asm:asm-commons:9.4'
    api 'org.ow2.asm:asm-util:9.4'
    // Need LWJGL 2 for game decompilation.
    api('org.lwjgl.lwjgl:lwjgl:2.9.3') {
        transitive = false
    }
    include(project(":common")) {
        transitive = false
    }
}

jar.dependsOn(":common:jar")

afterEvaluate {
    jar {
        from(configurations.include.collect { it.isDirectory() ? it : zipTree(it) }) {
            exclude("module-info.class")
        }
    }
}